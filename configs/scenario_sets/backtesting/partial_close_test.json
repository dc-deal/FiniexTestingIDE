{
    "version": "1.0",
    "scenario_set_name": "partial_close_test",
    "created": "2026-02-23T00:00:00.000000",
    "description": "Partial Position Close Validation (#119) - Proportional P&L, fee splitting, multiple partial closes, remaining close",
    "global": {
        "data_mode": "realistic",
        "strategy_config": {
            "decision_logic_type": "CORE/backtesting/backtesting_multi_position",
            "worker_instances": {
                "backtesting_worker": "CORE/backtesting/backtesting_sample_worker"
            },
            "workers": {
                "backtesting_worker": {
                    "periods": {
                        "M5": 14,
                        "M30": 20
                    },
                    "bar_snapshot_checks": []
                }
            },
            "decision_logic_config": {
                "trade_sequence": [
                    {
                        "tick_number": 100,
                        "direction": "LONG",
                        "hold_ticks": 8000,
                        "lot_size": 0.03,
                        "_comment": "Trade #0: Partially closed twice, remainder closed by hold_ticks"
                    },
                    {
                        "tick_number": 200,
                        "direction": "SHORT",
                        "hold_ticks": 5000,
                        "lot_size": 0.02,
                        "_comment": "Trade #1: Full close only (no partial) — isolation check"
                    }
                ],
                "partial_close_sequence": [
                    {
                        "tick_number": 2000,
                        "position_index": 0,
                        "close_lots": 0.01,
                        "_comment": "Partial #0: Close 0.01 of 0.03 → remaining 0.02"
                    },
                    {
                        "tick_number": 4000,
                        "position_index": 0,
                        "close_lots": 0.01,
                        "_comment": "Partial #1: Close 0.01 of 0.02 → remaining 0.01"
                    }
                ],
                "lot_size": 0.1
            }
        },
        "execution_config": {
            "parallel_workers": false,
            "log_performance_stats": true
        },
        "trade_simulator_config": {
            "initial_balance": 100000,
            "account_currency": "auto",
            "seeds": {
                "api_latency_seed": 12345,
                "market_execution_seed": 67890
            }
        }
    },
    "scenarios": [
        {
            "name": "USDJPY_partial_close_test",
            "symbol": "USDJPY",
            "data_broker_type": "mt5",
            "start_date": "2025-09-25T16:00:00+00:00",
            "end_date": "2025-09-26T02:00:00+00:00",
            "max_ticks": 12000,
            "data_mode": "realistic",
            "enabled": true,
            "strategy_config": {},
            "execution_config": {},
            "trade_simulator_config": {}
        }
    ]
}