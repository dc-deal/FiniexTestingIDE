{
  "version": "1.0",
  "scenario_set_name": "sltp_limit_validation_test",
  "created": "2026-02-19T00:00:00.000000",
  "description": "SL/TP Trigger, Limit Order Fill & Modify Validation — Tests stop loss, take profit triggers, limit order fills, maker fees, and order modifications",
  "global": {
    "data_mode": "realistic",
    "strategy_config": {
      "decision_logic_type": "CORE/backtesting/backtesting_deterministic",
      "worker_instances": {
        "backtesting_worker": "CORE/backtesting/backtesting_sample_worker"
      },
      "workers": {
        "backtesting_worker": {
          "periods": {
            "M5": 14
          },
          "bar_snapshot_checks": []
        }
      },
      "decision_logic_config": {
        "trade_sequence": [],
        "lot_size": 0.01
      }
    },
    "execution_config": {
      "parallel_workers": false,
      "log_performance_stats": true
    },
    "trade_simulator_config": {
      "initial_balance": 100000,
      "account_currency": "auto",
      "seeds": {
        "api_latency_seed": 12345,
        "market_execution_seed": 67890
      }
    },
    "stress_test_config": {}
  },
  "scenarios": [
    {
      "name": "long_tp_trigger",
      "description": "LONG position with take profit — TP should trigger during uptrend (LONG extreme move #9: +128.1 pips)",
      "symbol": "USDJPY",
      "data_broker_type": "mt5",
      "start_date": "2026-01-08T22:35:00+00:00",
      "end_date": "2026-01-09T15:10:00+00:00",
      "max_ticks": null,
      "data_mode": "realistic",
      "enabled": true,
      "strategy_config": {
        "decision_logic_config": {
          "trade_sequence": [
            {
              "tick_number": 10,
              "direction": "LONG",
              "hold_ticks": 999999,
              "lot_size": 0.01,
              "stop_loss": 156.000,
              "take_profit": 157.300
            }
          ]
        }
      },
      "execution_config": {},
      "trade_simulator_config": {}
    },
    {
      "name": "long_sl_trigger",
      "description": "LONG position against downtrend — SL should trigger (SHORT extreme move #8: -175.0 pips)",
      "symbol": "USDJPY",
      "data_broker_type": "mt5",
      "start_date": "2025-12-10T12:20:00+00:00",
      "end_date": "2025-12-12T05:55:00+00:00",
      "max_ticks": null,
      "data_mode": "realistic",
      "enabled": true,
      "strategy_config": {
        "decision_logic_config": {
          "trade_sequence": [
            {
              "tick_number": 10,
              "direction": "LONG",
              "hold_ticks": 999999,
              "lot_size": 0.01,
              "stop_loss": 156.000,
              "take_profit": 157.500
            }
          ]
        }
      },
      "execution_config": {},
      "trade_simulator_config": {}
    },
    {
      "name": "short_tp_trigger",
      "description": "SHORT position with take profit — TP should trigger during downtrend (SHORT extreme move #8: -175.0 pips)",
      "symbol": "USDJPY",
      "data_broker_type": "mt5",
      "start_date": "2025-12-10T12:20:00+00:00",
      "end_date": "2025-12-12T05:55:00+00:00",
      "max_ticks": null,
      "data_mode": "realistic",
      "enabled": true,
      "strategy_config": {
        "decision_logic_config": {
          "trade_sequence": [
            {
              "tick_number": 10,
              "direction": "SHORT",
              "hold_ticks": 999999,
              "lot_size": 0.01,
              "stop_loss": 157.500,
              "take_profit": 156.000
            }
          ]
        }
      },
      "execution_config": {},
      "trade_simulator_config": {}
    },
    {
      "name": "short_sl_trigger",
      "description": "SHORT position against uptrend — SL should trigger (LONG extreme move #7: +102.1 pips)",
      "symbol": "USDJPY",
      "data_broker_type": "mt5",
      "start_date": "2025-12-30T11:30:00+00:00",
      "end_date": "2026-01-01T05:05:00+00:00",
      "max_ticks": null,
      "data_mode": "realistic",
      "enabled": true,
      "strategy_config": {
        "decision_logic_config": {
          "trade_sequence": [
            {
              "tick_number": 10,
              "direction": "SHORT",
              "hold_ticks": 999999,
              "lot_size": 0.01,
              "stop_loss": 156.300,
              "take_profit": 155.000
            }
          ]
        }
      },
      "execution_config": {},
      "trade_simulator_config": {}
    },
    {
      "name": "modify_tp_trigger",
      "description": "LONG position with modify — initial TP unreachable, modified TP triggers (LONG extreme move #9)",
      "symbol": "USDJPY",
      "data_broker_type": "mt5",
      "start_date": "2026-01-08T22:35:00+00:00",
      "end_date": "2026-01-09T15:10:00+00:00",
      "max_ticks": null,
      "data_mode": "realistic",
      "enabled": true,
      "strategy_config": {
        "decision_logic_config": {
          "trade_sequence": [
            {
              "tick_number": 10,
              "direction": "LONG",
              "hold_ticks": 999999,
              "lot_size": 0.01,
              "stop_loss": 156.000,
              "take_profit": 160.000
            }
          ],
          "modify_sequence": [
            {
              "tick_number": 500,
              "take_profit": 157.300
            }
          ]
        }
      },
      "execution_config": {},
      "trade_simulator_config": {}
    },
    {
      "name": "long_limit_fill",
      "description": "LONG limit buy fills when price drops to limit level (SHORT extreme move #9: -175 pips)",
      "symbol": "USDJPY",
      "data_broker_type": "mt5",
      "start_date": "2025-12-10T12:20:00+00:00",
      "end_date": "2025-12-12T05:55:00+00:00",
      "max_ticks": null,
      "data_mode": "realistic",
      "enabled": true,
      "strategy_config": {
        "decision_logic_config": {
          "trade_sequence": [
            {
              "tick_number": 10,
              "direction": "LONG",
              "order_type": "LIMIT",
              "price": 156.000,
              "hold_ticks": 999999,
              "lot_size": 0.01
            }
          ]
        }
      },
      "execution_config": {},
      "trade_simulator_config": {}
    },
    {
      "name": "short_limit_fill",
      "description": "SHORT limit sell fills when price rises to limit level (LONG extreme move #11: +128.1 pips)",
      "symbol": "USDJPY",
      "data_broker_type": "mt5",
      "start_date": "2026-01-08T22:35:00+00:00",
      "end_date": "2026-01-09T15:10:00+00:00",
      "max_ticks": null,
      "data_mode": "realistic",
      "enabled": true,
      "strategy_config": {
        "decision_logic_config": {
          "trade_sequence": [
            {
              "tick_number": 10,
              "direction": "SHORT",
              "order_type": "LIMIT",
              "price": 157.300,
              "hold_ticks": 999999,
              "lot_size": 0.01
            }
          ]
        }
      },
      "execution_config": {},
      "trade_simulator_config": {}
    },
    {
      "name": "limit_fill_then_sl",
      "description": "LONG limit fills at dip, then SL triggers as price drops further (SHORT extreme: -175 pips)",
      "symbol": "USDJPY",
      "data_broker_type": "mt5",
      "start_date": "2025-12-10T12:20:00+00:00",
      "end_date": "2025-12-12T05:55:00+00:00",
      "max_ticks": null,
      "data_mode": "realistic",
      "enabled": true,
      "strategy_config": {
        "decision_logic_config": {
          "trade_sequence": [
            {
              "tick_number": 10,
              "direction": "LONG",
              "order_type": "LIMIT",
              "price": 156.500,
              "hold_ticks": 999999,
              "lot_size": 0.01,
              "stop_loss": 155.800,
              "take_profit": 157.000
            }
          ]
        }
      },
      "execution_config": {},
      "trade_simulator_config": {}
    },
    {
      "name": "modify_limit_price_fill",
      "description": "Limit order placed deep, price modified closer before fill (SHORT extreme: -175 pips)",
      "symbol": "USDJPY",
      "data_broker_type": "mt5",
      "start_date": "2025-12-10T12:20:00+00:00",
      "end_date": "2025-12-12T05:55:00+00:00",
      "max_ticks": null,
      "data_mode": "realistic",
      "enabled": true,
      "strategy_config": {
        "decision_logic_config": {
          "trade_sequence": [
            {
              "tick_number": 10,
              "direction": "LONG",
              "order_type": "LIMIT",
              "price": 155.000,
              "hold_ticks": 999999,
              "lot_size": 0.01
            }
          ],
          "modify_limit_sequence": [
            {
              "tick_number": 500,
              "price": 156.200
            }
          ]
        }
      },
      "execution_config": {},
      "trade_simulator_config": {}
    },
    {
      "name": "stop_long_trigger",
      "description": "STOP LONG — stop triggers when uptrend pushes price above stop_price (LONG extreme move #9: +128.1 pips)",
      "symbol": "USDJPY",
      "data_broker_type": "mt5",
      "start_date": "2026-01-08T22:35:00+00:00",
      "end_date": "2026-01-09T15:10:00+00:00",
      "max_ticks": null,
      "data_mode": "realistic",
      "enabled": true,
      "strategy_config": {
        "decision_logic_config": {
          "trade_sequence": [
            {
              "tick_number": 10,
              "direction": "LONG",
              "order_type": "STOP",
              "stop_price": 157.000,
              "hold_ticks": 999999,
              "lot_size": 0.01
            }
          ]
        }
      },
      "execution_config": {},
      "trade_simulator_config": {}
    },
    {
      "name": "stop_short_trigger",
      "description": "STOP SHORT — stop triggers when downtrend pushes price below stop_price (SHORT extreme move #8: -175.0 pips)",
      "symbol": "USDJPY",
      "data_broker_type": "mt5",
      "start_date": "2025-12-10T12:20:00+00:00",
      "end_date": "2025-12-12T05:55:00+00:00",
      "max_ticks": null,
      "data_mode": "realistic",
      "enabled": true,
      "strategy_config": {
        "decision_logic_config": {
          "trade_sequence": [
            {
              "tick_number": 10,
              "direction": "SHORT",
              "order_type": "STOP",
              "stop_price": 156.200,
              "hold_ticks": 999999,
              "lot_size": 0.01
            }
          ]
        }
      },
      "execution_config": {},
      "trade_simulator_config": {}
    },
    {
      "name": "stop_limit_long_trigger",
      "description": "STOP_LIMIT LONG — stop triggers at 157.000, fills at limit 157.200 (LONG extreme move #9: +128.1 pips)",
      "symbol": "USDJPY",
      "data_broker_type": "mt5",
      "start_date": "2026-01-08T22:35:00+00:00",
      "end_date": "2026-01-09T15:10:00+00:00",
      "max_ticks": null,
      "data_mode": "realistic",
      "enabled": true,
      "strategy_config": {
        "decision_logic_config": {
          "trade_sequence": [
            {
              "tick_number": 10,
              "direction": "LONG",
              "order_type": "STOP_LIMIT",
              "stop_price": 157.000,
              "price": 157.200,
              "hold_ticks": 999999,
              "lot_size": 0.01
            }
          ]
        }
      },
      "execution_config": {},
      "trade_simulator_config": {}
    },
    {
      "name": "stop_limit_short_trigger",
      "description": "STOP_LIMIT SHORT — stop triggers at 156.200, fills at limit 156.000 (SHORT extreme move #8: -175.0 pips)",
      "symbol": "USDJPY",
      "data_broker_type": "mt5",
      "start_date": "2025-12-10T12:20:00+00:00",
      "end_date": "2025-12-12T05:55:00+00:00",
      "max_ticks": null,
      "data_mode": "realistic",
      "enabled": true,
      "strategy_config": {
        "decision_logic_config": {
          "trade_sequence": [
            {
              "tick_number": 10,
              "direction": "SHORT",
              "order_type": "STOP_LIMIT",
              "stop_price": 156.200,
              "price": 156.000,
              "hold_ticks": 999999,
              "lot_size": 0.01
            }
          ]
        }
      },
      "execution_config": {},
      "trade_simulator_config": {}
    },
    {
      "name": "stop_long_then_tp",
      "description": "STOP LONG triggers, then TP closes position — validates STOP+TP combo (LONG extreme: +128.1 pips)",
      "symbol": "USDJPY",
      "data_broker_type": "mt5",
      "start_date": "2026-01-08T22:35:00+00:00",
      "end_date": "2026-01-09T15:10:00+00:00",
      "max_ticks": null,
      "data_mode": "realistic",
      "enabled": true,
      "strategy_config": {
        "decision_logic_config": {
          "trade_sequence": [
            {
              "tick_number": 10,
              "direction": "LONG",
              "order_type": "STOP",
              "stop_price": 156.800,
              "hold_ticks": 999999,
              "lot_size": 0.01,
              "take_profit": 157.300
            }
          ]
        }
      },
      "execution_config": {},
      "trade_simulator_config": {}
    },
    {
      "name": "modify_stop_trigger",
      "description": "STOP LONG with unreachable stop, modified closer — triggers after modification (LONG extreme: +128.1 pips)",
      "symbol": "USDJPY",
      "data_broker_type": "mt5",
      "start_date": "2026-01-08T22:35:00+00:00",
      "end_date": "2026-01-09T15:10:00+00:00",
      "max_ticks": null,
      "data_mode": "realistic",
      "enabled": true,
      "strategy_config": {
        "decision_logic_config": {
          "trade_sequence": [
            {
              "tick_number": 10,
              "direction": "LONG",
              "order_type": "STOP",
              "stop_price": 158.000,
              "hold_ticks": 999999,
              "lot_size": 0.01
            }
          ],
          "modify_stop_sequence": [
            {
              "tick_number": 500,
              "stop_price": 157.000
            }
          ]
        }
      },
      "execution_config": {},
      "trade_simulator_config": {}
    },
    {
      "name": "cancel_stop_no_fill",
      "description": "STOP LONG cancelled before trigger — validates 0 trades after cancellation (LONG extreme: +128.1 pips)",
      "symbol": "USDJPY",
      "data_broker_type": "mt5",
      "start_date": "2026-01-08T22:35:00+00:00",
      "end_date": "2026-01-09T15:10:00+00:00",
      "max_ticks": null,
      "data_mode": "realistic",
      "enabled": true,
      "strategy_config": {
        "decision_logic_config": {
          "trade_sequence": [
            {
              "tick_number": 10,
              "direction": "LONG",
              "order_type": "STOP",
              "stop_price": 157.000,
              "hold_ticks": 999999,
              "lot_size": 0.01
            }
          ],
          "cancel_stop_sequence": [
            {
              "tick_number": 100
            }
          ]
        }
      },
      "execution_config": {},
      "trade_simulator_config": {}
    },
    {
      "name": "cancel_limit_no_fill",
      "description": "LONG LIMIT at utopian price cancelled before fill — validates 0 trades after cancellation (LONG extreme: +128.1 pips)",
      "symbol": "USDJPY",
      "data_broker_type": "mt5",
      "start_date": "2026-01-08T22:35:00+00:00",
      "end_date": "2026-01-09T15:10:00+00:00",
      "max_ticks": null,
      "data_mode": "realistic",
      "enabled": true,
      "strategy_config": {
        "decision_logic_config": {
          "trade_sequence": [
            {
              "tick_number": 10,
              "direction": "LONG",
              "order_type": "LIMIT",
              "price": 150.000,
              "hold_ticks": 999999,
              "lot_size": 0.01
            }
          ],
          "cancel_limit_sequence": [
            {
              "tick_number": 100
            }
          ]
        }
      },
      "execution_config": {},
      "trade_simulator_config": {}
    }
  ]
}